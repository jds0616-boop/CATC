<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>KAC 차량지원 통합 마스터</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <style>
    :root {
      --navy: #0f172a; --blue: #0ea5e9; --blue-deep: #0369a1;
      --bg: #f1f5f9; --card: #ffffff; --border: #e2e8f0;
      --success: #10b981; --danger: #ef4444; --warning: #f59e0b;
      --color-mon: #3b82f6; --color-tue: #10b981; --color-wed: #f59e0b; --color-thu: #8b5cf6; --color-fri: #ec4899;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Pretendard', sans-serif; }
    body { margin: 0; padding: 0; background: #cfd8e3; display: flex; justify-content: center; height: 100dvh; overflow: hidden; }
    
    .app-container { width: 100%; max-width: 600px; height: 100%; background: var(--bg); display: flex; flex-direction: column; position: relative; box-shadow: 0 0 50px rgba(0,0,0,0.2); }
    
    /* 상단바 */
    .app-header { height: 60px; background: var(--navy); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; border-bottom: 2px solid var(--blue); flex-shrink: 0; }
    .header-title { font-size: 17px; font-weight: 900; color: #fff; letter-spacing: -0.5px; }
    .sync-status { font-size: 11px; color: var(--success); font-weight: 800; display: flex; align-items: center; gap: 5px; }

    /* 탭 바 */
    .tab-bar { display: flex; background: #fff; border-bottom: 1px solid var(--border); flex-shrink: 0; }
    .tab-btn { flex: 1; padding: 16px 0; border: none; background: none; font-size: 14px; font-weight: 800; color: #94a3b8; cursor: pointer; border-bottom: 3px solid transparent; }
    .tab-btn.active { color: var(--blue-deep); border-bottom-color: var(--blue); background: #f8fafc; }

    .app-content { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; }

    /* [탭 1] 강사 수송 리스트 기사님 최적화 디자인 */
    .transport-card { background: #fff; border-radius: 20px; border: 1.5px solid var(--border); margin-bottom: 12px; display: flex; align-items: center; padding: 15px; transition: 0.2s; position: relative; overflow: hidden; }
    .transport-card.approved-mode { background: #f0fdf4; border-color: #bbf7d0; } 
    
    .t-day-block { width: 55px; height: 55px; border-radius: 14px; color: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 900; flex-shrink: 0; line-height: 1.1; }
    .t-day-block .day-label { font-size: 20px; }
    .t-day-block .date-label { font-size: 11px; opacity: 0.9; }

    .day-1 { background: var(--color-mon); } .day-2 { background: var(--color-tue); } .day-3 { background: var(--color-wed); } .day-4 { background: var(--color-thu); } .day-5 { background: var(--color-fri); }

    .t-main { flex: 1; padding-left: 15px; overflow: hidden; }
    .t-time-row { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }
    .t-time { font-size: 24px; font-weight: 900; color: var(--navy); }
    .t-route-badge { background: var(--blue-deep); color: #fff; font-size: 11px; padding: 2px 8px; border-radius: 6px; font-weight: 800; }
    .t-prof { font-size: 16px; font-weight: 700; color: #475569; }

    .t-actions { display: flex; gap: 8px; position: relative; z-index: 10; }
    .btn-action { width: 44px; height: 44px; border-radius: 50%; border: 1.5px solid #ddd; background: #fff; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px; transition: 0.2s; }
    .btn-action.ok { color: var(--success); border-color: var(--success); background: #f0fdf4; }
    .btn-action.undo { color: var(--warning); border-color: var(--warning); background: #fffbeb; }
    .btn-action.del { color: var(--danger); border-color: #fecaca; }

    /* 배차확정 도장 (가장 앞 레이어) */
    .t-stamp { position: absolute; right: 85px; top: 50%; transform: translateY(-50%) rotate(-15deg); border: 4px solid #10b981; color: #10b981; padding: 4px 12px; border-radius: 10px; font-weight: 900; font-size: 15px; opacity: 0; pointer-events: none; transition: 0.3s; z-index: 30; background: rgba(255,255,255,0.8); }
    .approved-mode .t-stamp { opacity: 0.9; }

    /* [탭 2] 퇴교 관리 */
    .total-summary-card { background: linear-gradient(135deg, var(--navy) 0%, #1e293b 100%); border-radius: 20px; padding: 22px; color: #fff; text-align: center; margin-bottom: 10px; }
    .total-summary-card b { font-size: 40px; font-weight: 900; color: var(--blue); }
    .grid-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; }
    .grid-box { background: #fff; padding: 18px 5px; border-radius: 18px; border: 1.5px solid var(--border); text-align: center; cursor: pointer; transition: 0.2s; }
    .grid-box b { font-size: 26px; font-weight: 900; color: var(--navy); }

    .course-card { background: #fff; border-radius: 20px; padding: 20px; border: 1.5px solid var(--border); margin-bottom: 12px; position: relative; }
    .status-large-label { position: absolute; top: 18px; right: 20px; font-size: 18px; font-weight: 900; color: var(--success); }

    /* 종합 일정표 */
    .week-nav { display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 10px; background: #fff; padding: 12px; border-radius: 12px; border: 1px solid var(--border); }
    .schedule-table td { border: 1px solid #ddd; text-align: center; height: 60px; vertical-align: middle; }
    .time-col { width: 50px; background: #f1f5f9 !important; font-weight: 900; border-right: 2px solid var(--navy) !important; }

    /* 모달 및 드릴다운 그리드 (행정용과 동일) */
    .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9000; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(5px); }
    .modal-box { background: #fff; width: 100%; max-width: 500px; border-radius: 28px; padding: 25px; box-shadow: 0 20px 60px rgba(0,0,0,0.5); text-align: center; }
    .modal-desc { max-height: 500px; overflow-y: auto; margin-bottom: 20px; }
    
    .drill-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 10px 0; }
    .drill-box { background: #f8fafc; border: 1.5px solid #e2e8f0; border-radius: 12px; padding: 12px 5px; text-align: center; display: flex; flex-direction: column; gap: 4px; }
    .db-name { font-weight: 900; font-size: 15px; color: var(--navy); }
    .db-phone { font-size: 12px; color: #64748b; font-weight: 700; }
    .db-course { font-size: 10px; color: var(--blue-deep); font-weight: 800; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    /* 하단바 */
    .app-footer { height: 65px; background: var(--navy); border-top: 2px solid var(--blue); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; flex-shrink: 0; position: relative; }
    .footer-home { width: 56px; height: 56px; background: var(--blue); color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; position: absolute; bottom: 35px; left: 50%; transform: translateX(-50%); box-shadow: 0 8px 20px rgba(0,0,0,0.3); cursor: pointer; border: 4px solid var(--navy); z-index: 100; transition: 0.2s; }
    .footer-clock { font-size: 14px; font-weight: 900; color: #fff; font-family: monospace; }
  </style>
</head>
<body>

<div class="app-container">
  <header class="app-header">
    <div style="width:40px; color:#fff; font-size:20px; cursor:pointer;" onclick="location.href='portal.html'"><i class="fa-solid fa-chevron-left"></i></div>
    <div class="header-title">KAC 차량지원 통합 마스터</div>
    <div class="sync-status"><i class="fa-solid fa-sync fa-spin"></i> 실시간 감시</div>
  </header>

  <div class="tab-bar">
    <button id="tab0" class="tab-btn active" onclick="switchTab(0)">종합 일정표</button>
    <button id="tab1" class="tab-btn" onclick="switchTab(1)">강사 수송 리스트</button>
    <button id="tab2" class="tab-btn" onclick="switchTab(2)">교육생 퇴교 관리</button>
  </div>

  <main class="app-content" id="main-content">
    <div id="view-0" style="display: block;">
      <div class="week-nav">
        <i class="fa-solid fa-circle-chevron-left nav-arrow" onclick="changeWeek(-1)"></i>
        <div class="week-label" id="week-range">날짜 계산 중...</div>
        <i class="fa-solid fa-circle-chevron-right nav-arrow" onclick="changeWeek(1)"></i>
      </div>
      <div class="schedule-wrapper"><table class="schedule-table"><thead id="sched-head"></thead><tbody id="sched-body"></tbody></table></div>
    </div>

    <div id="view-1" style="display: none;">
      <div id="new-request-container"></div> 
      <div id="all-request-container"></div> 
    </div>

    <div id="view-2" style="display: none;">
      <div class="total-summary-card"><span>금일 전체 차량탑승 교육생 (자차 제외)</span><b id="sum-total">0명</b></div>
      <div class="grid-stats">
        <div class="grid-box" onclick="showDrillDown('osong')"><span>오송역</span><b id="sum-osong">0</b></div>
        <div class="grid-box" onclick="showDrillDown('terminal')"><span>터미널</span><b id="sum-term">0</b></div>
        <div class="grid-box" onclick="showDrillDown('airport')"><span>공항</span><b id="cnt-air">0</b></div>
      </div>
      <div id="trainee-course-list"></div>
    </div>
  </main>

  <div class="footer-home" id="floating-home" onclick="switchTab(0)"><i class="fa-solid fa-house"></i></div>
  <footer class="app-footer">
    <div class="footer-clock" id="clock">0000.00.00 00:00:00</div>
    <img src="logo.png" alt="KAC" style="height:22px; filter: brightness(0) invert(1);">
  </footer>
</div>

<div id="detailModal" class="modal-overlay" onclick="if(event.target==this) closeModal('detailModal')">
  <div class="modal-box">
    <div class="modal-title" id="m-title">정보</div>
    <div id="m-content" class="modal-desc"></div>
    <button class="m-btn no" style="width:100%" onclick="closeModal('detailModal')">닫기</button>
  </div>
</div>

<div id="confirmModal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-title" id="c-title">확인</div>
    <div id="c-desc" class="modal-desc" style="text-align:center;">내용</div>
    <div class="modal-btn-group">
        <button class="m-btn no" onclick="closeModal('confirmModal')">취소</button>
        <button class="m-btn ok" id="c-ok-btn">확인</button>
    </div>
  </div>
</div>

<script src="config.js"></script>
<script>
  let allCourses = {}; let profReqs = []; let weekOffset = 0; let pendingCount = 0;
  const alarmAudio = new Audio('timer.mp3');

  function init() {
    setInterval(updateClock, 1000);
    firebase.database().ref('courses').on('value', snap => { allCourses = snap.val() || {}; renderAll(); });
    firebase.database().ref('system/transport_requests').on('value', snap => {
      const raw = snap.val() || {};
      profReqs = Object.keys(raw).map(k => ({ id: k, ...raw[k] }));
      checkNewRequests(); renderAll();
    });
  }

  function checkNewRequests() {
    const currentPending = profReqs.filter(r => r.status === 'pending').length;
    if (currentPending > pendingCount) { playAlarm(2); }
    pendingCount = currentPending;
  }
  function playAlarm(times) {
    let played = 0;
    const play = () => { alarmAudio.play().catch(e => {}); played++; if (played < times) alarmAudio.onended = play; else alarmAudio.onended = null; };
    play();
  }

  function renderAll() { renderSchedule(); renderInstructorList(); renderTraineeManagement(); }

  function renderSchedule() {
    const head = document.getElementById('sched-head'); const body = document.getElementById('sched-body');
    const range = getWeekDates(weekOffset); const dayNames = ['월','화','수','목','금'];
    document.getElementById('week-range').innerText = `${range[0]} ~ ${range[4].substring(5)}`;
    head.innerHTML = `<tr><th class="time-col">시간</th>${range.map((d, i) => `<th onclick="askDayOff('${d}')">${d.substring(5)}<br>${dayNames[i]}</th>`).join('')}</tr>`;
    body.innerHTML = '';
    for(let h=8; h<=18; h++) {
      let row = `<tr><td class="time-col">${h}:00</td>`;
      for(let d=0; d<5; d++) {
        const curDate = range[d]; let content = '';
        if(profReqs.some(r => r.date === curDate && r.prof === '운행중단')) {
          content = (h === 12) ? `<div class="cell-event block-off">운행불가</div>` : `<div class="cell-event block-off"></div>`;
        } else if(d === 0 && (h === 9 || h === 10)) { content = `<div class="cell-event block-entry">입교수송</div>`; }
        else if(h === 12) { content = `<div class="cell-event block-lunch">점심</div>`; }
        else {
          const matchedProf = profReqs.filter(r => r.date === curDate && parseInt(r.time.split(':')[0]) === h && r.status === 'approved');
          if(matchedProf.length > 0) content = `<div class="cell-event block-prof" onclick="showProfDetail('${curDate}', ${h})">${matchedProf[0].dir.replace('항공기술훈련원','항기원')}<br>${matchedProf[0].prof}</div>`;
          else {
            Object.keys(allCourses).forEach(rid => {
              const dep = allCourses[rid].shuttle?.departure;
              if(dep && dep.date === curDate && parseInt(dep.time.split(':')[0]) === h) content = `<div class="cell-event block-departure" onclick="showDrillDown('course', '${rid}')">퇴교 수송</div>`;
            });
          }
        }
        row += `<td>${content}</td>`;
      }
      body.innerHTML += row + '</tr>';
    }
  }

  function renderInstructorList() {
    const newZone = document.getElementById('new-request-container');
    const allZone = document.getElementById('all-request-container');
    newZone.innerHTML = ''; allZone.innerHTML = '';
    const sorted = profReqs.filter(r => r.prof !== '운행중단').sort((a,b) => (a.date+a.time).localeCompare(b.date+b.time));
    const pending = sorted.filter(r => r.status === 'pending');
    if(pending.length > 0) {
        newZone.innerHTML = `<div class="new-request-zone"><div class="zone-title"><i class="fa-solid fa-bell fa-shake"></i> 확인이 필요한 신규 요청</div><div id="new-req-list"></div></div>`;
        pending.forEach(r => document.getElementById('new-req-list').appendChild(createCard(r)));
    }
    sorted.forEach(r => allZone.appendChild(createCard(r)));
  }

  function createCard(r) {
    const isApproved = r.status === 'approved';
    const dayNames = ["일","월","화","수","목","금","토"];
    const dIdx = new Date(r.date).getDay();
    const div = document.createElement('div');
    div.className = `transport-card ${isApproved ? 'approved-mode' : ''}`;
    
    const actionHtml = isApproved ? 
        `<div class="t-actions">
            <div class="btn-action undo" onclick="confirmAction('cancel', '${r.id}')" title="승인취소"><i class="fa-solid fa-rotate-left"></i></div>
            <div class="btn-action del" onclick="confirmAction('delete', '${r.id}')" title="삭제"><i class="fa-solid fa-trash-can"></i></div>
         </div>` : 
        `<div class="t-actions">
            <div class="btn-action ok" onclick="handleSmartApprove('${r.id}')" title="승인하기"><i class="fa-solid fa-check"></i></div>
            <div class="btn-action del" onclick="confirmAction('delete', '${r.id}')" title="거절하기"><i class="fa-solid fa-xmark"></i></div>
         </div>`;

    div.innerHTML = `
        <div class="t-day-block day-${dIdx}"><span class="day-label">${dayNames[dIdx]}</span><span class="date-label">${r.date.substring(5)}</span></div>
        <div class="t-main">
            <div class="t-time-row"><span class="t-time">${r.time}</span><span class="t-route-badge">${r.dir.replace('항공기술훈련원','항기원')}</span></div>
            <div class="t-prof">${r.prof} 강사님</div>
        </div>
        <div class="t-stamp">배차확정</div>
        ${actionHtml}
        <div class="btn-action" style="margin-left:8px;" onclick="window.location.href='tel:${r.phone}'"><i class="fa-solid fa-phone"></i></div>`;
    return div;
  }

  async function handleSmartApprove(id) {
    const target = profReqs.find(r => r.id === id); const targetH = parseInt(target.time.split(':')[0]);
    let conflict = false;
    Object.values(allCourses).forEach(room => {
        const dep = room.shuttle?.departure; if(dep && dep.date === target.date && parseInt(dep.time.split(':')[0]) === targetH) conflict = true;
    });
    const other = profReqs.filter(r => r.date === target.date && parseInt(r.time.split(':')[0]) === targetH && r.status === 'approved');
    if(conflict || other.length > 0) {
        showConfirm("⚠️ 배차 충돌 경고", "해당 시간에 이미 다른 수송 일정이 존재합니다.<br>그래도 승인하시겠습니까?", async () => { await firebase.database().ref(`system/transport_requests/${id}`).update({ status: 'approved' }); closeModal('confirmModal'); });
    } else confirmAction('approve', id);
  }

  function renderTraineeManagement() {
    const area = document.getElementById('trainee-course-list'); area.innerHTML = '';
    let stats = { o:0, t:0, a:0, total:0 };
    Object.keys(allCourses).forEach(rid => {
      const room = allCourses[rid]; if(room.status?.roomStatus !== 'active') return;
      const dep = room.shuttle?.departure || { time: "" };
      const reqs = Object.values(room.shuttle?.requests || {});
      const cO = reqs.filter(r=>r.type==='osong').length; const cT = reqs.filter(r=>r.type==='terminal').length; const cA = reqs.filter(r=>r.type==='airport').length;
      stats.o += cO; stats.t += cT; stats.a += cA; stats.total += (cO + cT + cA);
      area.innerHTML += `
        <div class="course-card">
          <div class="status-large-label">${dep.time ? dep.time+' 공지됨' : ''}</div>
          <span class="course-main-name">#${rid} ${room.settings?.courseName || '과정'}</span>
          <span class="course-sub-stats">오송 ${cO} · 터미널 ${cT} · 공항 ${cA}</span>
          <div class="time-selector">
            <button class="time-btn ${dep.time==='13:00'?'active':''}" onclick="confirmAction('dep', '${rid}', '13:00')">13:00</button>
            <button class="time-btn ${dep.time==='15:00'?'active':''}" onclick="confirmAction('dep', '${rid}', '15:00')">15:00</button>
            <button class="time-btn ${dep.time && !['13:00','15:00'].includes(dep.time)?'active':''}" onclick="askManual('${rid}')">수동</button>
          </div>
        </div>`;
    });
    document.getElementById('sum-total').innerText = stats.total + "명";
    document.getElementById('sum-osong').innerText = stats.o; document.getElementById('sum-term').innerText = stats.t; document.getElementById('cnt-air').innerText = stats.a;
  }

  function showDrillDown(type, filterRid = null) {
    const area = document.getElementById('m-content'); document.getElementById('m-title').innerText = "상세 탑승 명단";
    area.innerHTML = '<div class="drill-grid" id="drill-grid"></div>';
    let list = [];
    Object.keys(allCourses).forEach(rid => {
        if(filterRid && rid !== filterRid) return;
        Object.values(allCourses[rid].shuttle?.requests || {}).forEach(req => {
            if(req.type === 'car') return;
            if(type==='all' || req.type===type || type==='course') list.push({...req, cName: allCourses[rid].settings?.courseName});
        });
    });
    if(list.length === 0) area.innerHTML = "신청자가 없습니다.";
    else {
        list.sort((a,b)=>a.name.localeCompare(b.name));
        list.forEach(i => document.getElementById('drill-grid').innerHTML += `<div class="drill-box"><span class="db-name">${i.name}</span><span class="db-phone">${i.phone.slice(-4)}</span><span class="db-course">${i.cName}</span></div>`);
    }
    document.getElementById('detailModal').style.display = 'flex';
  }

  function confirmAction(type, id, val = null) {
    const modal = document.getElementById('confirmModal'); const okBtn = document.getElementById('c-ok-btn');
    if(type==='approve') { document.getElementById('c-title').innerText="수송 승인"; document.getElementById('c-desc').innerText="배차를 확정하고 일정표에 등록하시겠습니까?"; okBtn.onclick=async()=>{ await firebase.database().ref(`system/transport_requests/${id}`).update({status:'approved'}); closeModal('confirmModal'); }; }
    else if(type==='cancel') { document.getElementById('c-title').innerText="승인 취소"; document.getElementById('c-desc').innerText="배차 승인을 취소하고 대기 상태로 돌릴까요?"; okBtn.onclick=async()=>{ await firebase.database().ref(`system/transport_requests/${id}`).update({status:'pending'}); closeModal('confirmModal'); }; }
    else if(type==='delete') { document.getElementById('c-title').innerText="삭제/거절"; document.getElementById('c-desc').innerHTML="<span style='color:red; font-weight:900;'>즉시 삭제됩니다. 계속하시겠습니까?</span>"; okBtn.onclick=async()=>{ await firebase.database().ref(`system/transport_requests/${id}`).remove(); closeModal('confirmModal'); }; }
    else if(type==='dep') { document.getElementById('c-title').innerText="퇴교 공지"; document.getElementById('c-desc').innerText=`[${val}] 시간을 공지하시겠습니까?`; okBtn.onclick=async()=>{ await firebase.database().ref(`courses/${id}/shuttle/departure`).set({time:val, date:new Date().toISOString().split('T')[0]}); closeModal('confirmModal'); }; }
    modal.style.display = 'flex';
  }

  function switchTab(n) {
    document.querySelectorAll('.tab-btn').forEach((b, i) => b.classList.toggle('active', i === n));
    document.querySelectorAll('[id^="view-"]').forEach((v, i) => v.style.display = i === n ? 'block' : 'none');
    document.getElementById('floating-home').style.display = (n === 0) ? 'none' : 'flex';
  }
  function showConfirm(title, desc, callback) { document.getElementById('c-title').innerText = title; document.getElementById('c-desc').innerHTML = desc; document.getElementById('c-ok-btn').onclick = callback; document.getElementById('confirmModal').style.display = 'flex'; }
  function closeModal(id) { document.getElementById(id).style.display = 'none'; }
  function askDayOff(date) {
    const existing = profReqs.find(r => r.date === date && r.prof === '운행중단');
    if(existing) { if(confirm(`${date} 운행 중단 설정을 해제할까요?`)) firebase.database().ref(`system/transport_requests/${existing.id}`).remove(); return; }
    const reason = prompt(`${date} 운행중단 사유를 입력하세요`, "차량 정비");
    if(reason) firebase.database().ref('system/transport_requests').push({ date, prof: '운행중단', dir: reason, status: 'approved', time: '00:00' });
  }
  function askManual(rid) { const t = prompt("시간 입력(예: 14:30)"); if(t) confirmAction('dep', rid, t); }
  function getWeekDates(offset) { const now = new Date(); const start = new Date(now.setDate(now.getDate() - (now.getDay() === 0 ? 6 : now.getDay() - 1) + (offset * 7))); const dates = []; for(let i=0; i<5; i++) { const d = new Date(start); d.setDate(start.getDate() + i); dates.push(d.toISOString().split('T')[0]); } return dates; }
  function changeWeek(n) { weekOffset += n; renderAll(); }
  function updateClock() { const now = new Date(); const days = ['일','월','화','수','목','금','토']; document.getElementById('clock').innerText = `${now.getFullYear()}.${String(now.getMonth()+1).padStart(2,'0')}.${String(now.getDate()).padStart(2,'0')} (${days[now.getDay()]}) ${String(now.getHours()).padStart(2,'0')}시 ${String(now.getMinutes()).padStart(2,'0')}분 ${String(now.getSeconds()).padStart(2,'0')}초`; }
  init();
</script>
</body>
</html>