<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KAC ì…”í‹€ íƒ‘ìŠ¹ í˜„í™© (ê¸°ì‚¬ìš©)</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <style>
        body { font-family: 'Pretendard', sans-serif; background: #f1f5f9; padding: 15px; margin: 0; color: #1e293b; }
        .header { background: #0f172a; color: white; padding: 20px; border-radius: 12px; text-align: center; margin-bottom: 20px; }
        .summary-card { background: white; border-radius: 12px; padding: 20px; display: flex; justify-content: space-around; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .sum-item { text-align: center; }
        .sum-item span { font-size: 13px; color: #64748b; display: block; }
        .sum-item b { font-size: 24px; color: #3b82f6; }
        .list-card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .list-card h3 { margin: 0 0 10px 0; font-size: 16px; border-bottom: 2px solid #f1f5f9; padding-bottom: 8px; }
        .applicant { font-size: 14px; padding: 6px 0; border-bottom: 1px solid #f8fafc; }
        .room-badge { background: #e2e8f0; font-size: 11px; padding: 2px 5px; border-radius: 4px; margin-right: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header"><h2>ğŸš ì…”í‹€ íƒ‘ìŠ¹ í†µí•© í˜„í™©</h2></div>
    
    <div class="summary-card">
        <div class="sum-item"><span>ì˜¤ì†¡ì—­</span><b id="total-osong">0</b></div>
        <div class="sum-item"><span>í„°ë¯¸ë„</span><b id="total-terminal">0</b></div>
        <div class="sum-item"><span>ê³µí•­</span><b id="total-airport">0</b></div>
    </div>

    <div id="listArea"></div>

    <script src="config.js"></script>
    <script>
        firebase.database().ref('courses').on('value', snap => {
            const courses = snap.val() || {};
            let totals = { osong: 0, terminal: 0, airport: 0 };
            let lists = { osong: [], terminal: [], airport: [] };
            const locNames = { osong: "ì˜¤ì†¡ì—­", terminal: "ì²­ì£¼í„°ë¯¸ë„", airport: "ì²­ì£¼ê³µí•­" };

            Object.keys(courses).forEach(room => {
                const shuttle = courses[room].shuttle || {};
                ['osong', 'terminal', 'airport'].forEach(loc => {
                    if(shuttle[loc]) {
                        const names = Object.values(shuttle[loc]);
                        totals[loc] += names.length;
                        names.forEach(n => lists[loc].push({ room: room, name: n }));
                    }
                });
            });

            document.getElementById('total-osong').innerText = totals.osong;
            document.getElementById('total-terminal').innerText = totals.terminal;
            document.getElementById('total-airport').innerText = totals.airport;

            const listArea = document.getElementById('listArea');
            listArea.innerHTML = "";
            ['osong', 'terminal', 'airport'].forEach(loc => {
                let html = `<div class="list-card"><h3>ğŸ“ ${locNames[loc]} ëª…ë‹¨ (${lists[loc].length}ëª…)</h3>`;
                if(lists[loc].length === 0) html += `<p style="color:#ccc; font-size:13px;">ì‹ ì²­ì ì—†ìŒ</p>`;
                lists[loc].forEach(item => {
                    html += `<div class="applicant"><span class="room-badge">Room ${item.room}</span> ${item.name}</div>`;
                });
                html += `</div>`;
                listArea.innerHTML += html;
            });
        });
    </script>
</body>
</html>